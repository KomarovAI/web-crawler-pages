name: Scrape Website
on:
  workflow_dispatch:
jobs:
  scrape:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Scrape callmedley.com
        run: |
          mkdir -p sites/callmedley_com/pages
          wget -r -l 3 -k -p --no-parent --timeout=10 -q \
            -P sites/callmedley_com/ \
            https://callmedley.com/ 2>&1 || true
          echo "Download complete"
      - name: Process downloaded pages
        run: python3 process_pages.py
      - name: Commit changes
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add sites/callmedley_com/ || true
          git commit -m "üï∑Ô∏è Scraped and processed pages" || true
          git push origin main || echo "Nothing to push"
